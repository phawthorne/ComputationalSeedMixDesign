(this["webpackJsonpcomputational-seed-mix-design"]=this["webpackJsonpcomputational-seed-mix-design"]||[]).push([[0],{74:function(t,e,n){t.exports=n(86)},79:function(t,e,n){},80:function(t,e,n){},82:function(t,e,n){},86:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(8),c=n.n(i),o=(n(79),n(80),n(35)),l=n.n(o),s=n(49),u=n(11),m=n(124),d=n(136),f=n(135),p=n(127),h=n(129),b=n(133),x=n(132),v=n(130),g=n(131),E=n(134),j=n(5),y=(n(82),function(){var t=50,e=50,n=50,i=50,c=Object(a.useState)(null),o=Object(u.a)(c,2),m=o[0],d=o[1],f=Object(a.useState)(null),p=Object(u.a)(f,2),h=p[0],b=p[1],x=Object(a.useState)(null),v=Object(u.a)(x,2),g=v[0],E=v[1],y=Object(a.useState)("cost"),M=Object(u.a)(y,2),S=M[0],C=M[1],N=Object(a.useState)("bloom"),A=Object(u.a)(N,2),z=A[0],T=A[1],B=Object(a.useState)({min:0,max:100}),P=Object(u.a)(B,2),W=P[0],D=P[1],I=Object(a.useState)({min:0,max:100}),J=Object(u.a)(I,2),X=J[0],Y=J[1],F=Object(a.useState)({min:0,max:100}),q=Object(u.a)(F,2),G=q[0],H=q[1],K=Object(a.useState)({min:0,max:100}),L=Object(u.a)(K,2),Q=L[0],R=L[1],U=Object(a.useState)({min:0,max:100}),V=Object(u.a)(U,2),Z=V[0],$=V[1],tt=Object(a.useState)({min:0,max:100}),et=Object(u.a)(tt,2),nt=et[0],at=et[1],rt=Object(a.useState)({min:0,max:100}),it=Object(u.a)(rt,2),ct=it[0],ot=it[1],lt=Object(a.useState)({min:0,max:100}),st=Object(u.a)(lt,2),ut=st[0],mt=st[1],dt=Object(a.useState)({min:0,max:100}),ft=Object(u.a)(dt,2),pt=ft[0],ht=ft[1],bt=Object(a.useState)({min:0,max:100}),xt=Object(u.a)(bt,2),vt=xt[0],gt=xt[1];return Object(a.useEffect)((function(){var t=j.g("#plot-pane").append("svg").attr("width",780).attr("height",600);d(t)}),[]),Object(a.useEffect)((function(){if(null!==m&&null!==h){var a=j.d(h,(function(t){return+t.cost})),r=j.f().domain([0,a]).range([i,780-e]),c=j.a().scale(r).ticks(4);m.append("g").attr("id","x-axis").attr("transform","translate(0, ".concat(600-n,")")).call(c).attr("stroke-width",1.5).attr("font-size","12pt"),m.append("text").attr("id","x-axis-label").attr("transform","translate(".concat(390,", ").concat(600-n+40,")")).style("text-anchor","middle").text(k[S]);var o=j.d(h,(function(t){return+t.bloom})),l=j.f().domain([15,o]).range([600-n,t]),s=j.b().scale(l).ticks(5);m.append("g").attr("id","y-axis").attr("transform","translate(".concat(i,", 0)")).call(s).attr("stroke-width",1.5).attr("font-size","12pt"),m.append("text").attr("id","y-axis-label").attr("transform","translate(18, ".concat(300,") rotate(-90)")).style("text-anchor","middle").text(k[z])}}),[m,h]),Object(a.useEffect)((function(){function t(){return(t=Object(s.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="/computational-seed-mix-design/static/data/scores.csv",console.log(e),t.next=4,j.c(e,(function(t){return{indiv:+t.indiv,cost:+t.cost,phylo_dist:+t.phylo_dist,bloom:+t.bloom,shannon:+t.shannon,consval:+t.consval,grass_spec_frac:+t.grass_spec_frac,grass_weight_frac:+t.grass_weight_frac}}));case 4:n=t.sent,D({min:Math.floor(j.e(n,(function(t){return+t.cost}))),max:Math.ceil(j.d(n,(function(t){return+t.cost})))}),Y({min:Math.floor(j.e(n,(function(t){return+t.bloom}))),max:Math.ceil(j.d(n,(function(t){return+t.bloom})))}),H({min:Math.floor(j.e(n,(function(t){return+t.shannon}))),max:Math.ceil(j.d(n,(function(t){return+t.shannon})))}),R({min:Math.floor(j.e(n,(function(t){return+t.consval}))),max:Math.ceil(j.d(n,(function(t){return+t.consval})))}),$({min:Math.floor(j.e(n,(function(t){return+t.phylo_dist}))),max:Math.ceil(j.d(n,(function(t){return+t.phylo_dist})))}),at({min:Math.floor(j.e(n,(function(t){return+t.cost}))),max:Math.ceil(j.d(n,(function(t){return+t.cost})))}),ot({min:Math.floor(j.e(n,(function(t){return+t.bloom}))),max:Math.ceil(j.d(n,(function(t){return+t.bloom})))}),mt({min:Math.floor(j.e(n,(function(t){return+t.shannon}))),max:Math.ceil(j.d(n,(function(t){return+t.shannon})))}),ht({min:Math.floor(j.e(n,(function(t){return+t.consval}))),max:Math.ceil(j.d(n,(function(t){return+t.consval})))}),gt({min:Math.floor(j.e(n,(function(t){return+t.phylo_dist}))),max:Math.ceil(j.d(n,(function(t){return+t.phylo_dist})))}),b(n);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){null!==m&&null!==h&&function(){var a=g,r=Math.floor(.98*j.e(h,(function(t){return+t[S]}))),c=j.d(h,(function(t){return+t[S]})),o=j.f().domain([r,c]).range([i,780-e]),l=j.a().scale(o).ticks(5);m.select("g#x-axis").call(l).attr("stroke-width",1.5).attr("font-size","12pt"),m.select("text#x-axis-label").text(k[S]);var s=Math.floor(.98*j.e(h,(function(t){return+t[z]}))),u=j.d(h,(function(t){return+t[z]})),d=j.f().domain([s,u]).range([600-n,t]),f=j.b().scale(d).ticks(5);function p(t){return t.indiv===a?"red":t.bloom>=ct.min&&t.bloom<=ct.max&&t.cost>=nt.min&&t.cost<=nt.max&&t.shannon>=ut.min&&t.shannon<=ut.max&&t.consval>=pt.min&&t.consval<=pt.max&&t.phylo_dist>=vt.min&&t.phylo_dist<=vt.max?"blue":"lightgray"}function b(t){return t.indiv===a?.85:.5}m.select("g#y-axis").call(f).attr("stroke-width",1.5).attr("font-size","12pt"),m.select("text#y-axis-label").text(k[z]);var x=j.h().duration(1e3);m.selectAll("circle").data(h).join((function(t){return t.append("circle").attr("cx",(function(t){return o(+t[S])})).attr("cy",(function(t){return d(+t[z])})).attr("r",3).attr("fill",(function(t){return p(t)})).attr("opacity",(function(t){return b(t)})).on("mouseover",(function(t,e){j.g(this).attr("opacity",.85).attr("r",5)})).on("mouseout",(function(t,e){j.g(this).attr("opacity",(function(t){return b(t)})).attr("r",3)})).on("click",(function(t,e){E(t.indiv),a=t.indiv,j.g("#selected-point").attr("id",null).attr("fill",(function(t){return p(t)})).attr("opacity",(function(t){return b(t)})),j.g(this).attr("fill","red").attr("opacity",.9).attr("id","selected-point")}))}),(function(t){return t.transition(x).attr("cx",(function(t){return o(+t[S])})).attr("cy",(function(t){return d(+t[z])})).attr("fill",(function(t){return p(t)})).attr("opacity",(function(t){return b(t)}))}),(function(t){return t.remove()}))}()}),[m,h,nt,ct,ut,pt,vt,S,z]),r.a.createElement("div",{id:"optim-browser"},r.a.createElement("div",{id:"ob-slider-pane"},r.a.createElement("h2",null,"Filters"),r.a.createElement(w,{name:"Cost",range:W,update:at}),r.a.createElement(w,{name:"Bloom",range:X,update:ot}),r.a.createElement(w,{name:"Shannon Diversity",range:G,update:mt}),r.a.createElement(w,{name:"Conservatism",range:Q,update:ht}),r.a.createElement(w,{name:"Phylo Dist",range:Z,update:gt})),r.a.createElement("div",{id:"ob-plot-pane"},r.a.createElement("h2",null,"Scatter Plot"),r.a.createElement(O,{xAxis:S,setXAxis:C,yAxis:z,setYAxis:T}),r.a.createElement("div",{id:"plot-pane"})),r.a.createElement(_,{mixid:g}))}),O=function(t){var e=t.xAxis,n=t.setXAxis,a=t.yAxis,i=t.setYAxis;return r.a.createElement("div",{id:"axis-control"},r.a.createElement(S,{value:e,updater:n}),r.a.createElement(S,{value:a,updater:i}))},M=Object(m.a)((function(t){return{formControl:{margin:t.spacing(1),minWidth:200},selectEmpty:{marginTop:t.spacing(2)},table:{minWidth:250},boldCell:{fontWeight:"bolder"}}})),S=function(t){var e=t.label,n=t.value,a=t.updater,i=M();return r.a.createElement(p.a,{className:i.formControl},r.a.createElement(d.a,null,e),r.a.createElement(E.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:n,onChange:function(t){return a(t.target.value)}},r.a.createElement(f.a,{value:"bloom"},"Bloom"),r.a.createElement(f.a,{value:"cost"},"Cost"),r.a.createElement(f.a,{value:"shannon"},"Shannon diversity"),r.a.createElement(f.a,{value:"consval"},"Conservatism"),r.a.createElement(f.a,{value:"phylo_dist"},"Phylogenetic distance")))},w=function(t){var e=t.name,n=t.range,i=t.update,c=Object(a.useState)(0),o=Object(u.a)(c,2),l=o[0],s=o[1],m=Object(a.useState)(1),d=Object(u.a)(m,2),f=d[0],p=d[1];return Object(a.useEffect)((function(){s(n.min),p(n.max)}),[n]),r.a.createElement("div",{className:"slider"},r.a.createElement("div",{className:"slider-header"},r.a.createElement("div",{className:"slider-objective-name"},e),r.a.createElement("div",{className:"slider-objective-range"},"(",n.min,"-",n.max,")")),r.a.createElement("div",{className:"slider-input-row"},"Min:",r.a.createElement("input",{type:"text",className:"slider-input",value:l,onChange:function(t){s(+t.currentTarget.value),i({min:+t.currentTarget.value,max:f})}}),"Max:",r.a.createElement("input",{type:"text",className:"slider-input",value:f,onChange:function(t){p(+t.currentTarget.value),i({min:l,max:+t.currentTarget.value})}})))},_=function(t){var e=t.mixid,n=(t.scores,Object(a.useState)([{species:"None",weight:0}])),i=Object(u.a)(n,2),c=i[0],o=i[1],m=function(t,e){return t.species<e.species?-1:e.species<t.species?1:0};return Object(a.useEffect)((function(){function t(){return(t=Object(s.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/computational-seed-mix-design"+"/static/data/mixes/mix".concat(e,".csv"),console.log(n),t.next=4,j.c(n,(function(t){return{id:+t.specindices,species:t.specnames,weight:+t.weights}}));case 4:(a=t.sent).sort(m),o(a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}null!==e&&function(){t.apply(this,arguments)}()}),[e]),r.a.createElement("div",{id:"ob-report-pane"},r.a.createElement("div",{id:"ob-report-table"},r.a.createElement("h2",null,"Mix Composition"),r.a.createElement(C,{composition:c})))},C=function(t){var e=t.composition,n=M();return r.a.createElement("div",{id:"mix-composition-table"},r.a.createElement(h.a,{className:n.table,size:"small","aria-label":"a dense table"},r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(x.a,{className:n.boldCell,style:{padding:"6px"}},"Species"),r.a.createElement(x.a,{className:n.boldCell,align:"right",style:{padding:"6px"}},"Weight\xa0(oz)"))),r.a.createElement(b.a,null,e.map((function(t){return r.a.createElement(g.a,{key:t.id},r.a.createElement(x.a,{component:"th",scope:"row",style:{padding:"6px"}},t.species.replace("_"," ")),r.a.createElement(x.a,{align:"right",style:{padding:"6px"}},Math.round(16*t.weight)))})))))},k={bloom:"Bloom",cost:"Cost",shannon:"Shannon diversity",consval:"Conservatism",phylo_dist:"Phylogenetic distance"},N=function(){return r.a.createElement("div",{id:"app-container"},r.a.createElement(y,null))};c.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.fe24d538.chunk.js.map