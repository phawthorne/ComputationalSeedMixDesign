(this["webpackJsonpcomputational-seed-mix-design"]=this["webpackJsonpcomputational-seed-mix-design"]||[]).push([[0],{73:function(t,e,n){t.exports=n(85)},78:function(t,e,n){},79:function(t,e,n){},81:function(t,e,n){},85:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(8),c=n.n(i),o=(n(78),n(79),n(35)),l=n.n(o),s=n(49),u=n(10),m=n(124),f=n(136),d=n(135),p=n(127),h=n(129),x=n(133),b=n(132),v=n(130),g=n(131),E=n(134),y=n(4),j=(n(81),function(){var t=10,e=40,n=50,i=50,c=Object(a.useState)(null),o=Object(u.a)(c,2),m=o[0],f=o[1],d=Object(a.useState)(null),p=Object(u.a)(d,2),h=p[0],x=p[1],b=Object(a.useState)(null),v=Object(u.a)(b,2),g=v[0],E=v[1],j=Object(a.useState)("cost"),w=Object(u.a)(j,2),M=w[0],C=w[1],A=Object(a.useState)("bloom"),_=Object(u.a)(A,2),z=_[0],B=_[1],P=Object(a.useState)({min:0,max:100}),T=Object(u.a)(P,2),D=T[0],W=T[1],I=Object(a.useState)({min:0,max:100}),J=Object(u.a)(I,2),X=J[0],Y=J[1],F=Object(a.useState)({min:0,max:100}),q=Object(u.a)(F,2),G=q[0],H=q[1],K=Object(a.useState)({min:0,max:100}),L=Object(u.a)(K,2),Q=L[0],R=L[1],U=Object(a.useState)({min:0,max:100}),V=Object(u.a)(U,2),Z=V[0],$=V[1],tt=Object(a.useState)({min:0,max:100}),et=Object(u.a)(tt,2),nt=et[0],at=et[1],rt=Object(a.useState)({min:0,max:100}),it=Object(u.a)(rt,2),ct=it[0],ot=it[1],lt=Object(a.useState)({min:0,max:100}),st=Object(u.a)(lt,2),ut=st[0],mt=st[1],ft=Object(a.useState)({min:0,max:100}),dt=Object(u.a)(ft,2),pt=dt[0],ht=dt[1],xt=Object(a.useState)({min:0,max:100}),bt=Object(u.a)(xt,2),vt=bt[0],gt=bt[1];Object(a.useEffect)((function(){var t=y.i("#plot-pane").append("svg").attr("width",690).attr("height",580);f(t)}),[]),Object(a.useEffect)((function(){if(null!==m&&null!==h){var a=y.e(h,(function(t){return+t.cost})),r=y.h().domain([0,a]).range([i,690-e]),c=y.a().scale(r).ticks(4);m.append("g").attr("id","x-axis").attr("transform","translate(0, ".concat(580-n,")")).call(c).attr("stroke-width",1.5).attr("font-size","12pt"),m.append("text").attr("id","x-axis-label").attr("transform","translate(".concat(345,", ").concat(580-n+40,")")).style("text-anchor","middle").text(N[M]);var o=y.e(h,(function(t){return+t.bloom})),l=y.h().domain([15,o]).range([580-n,t]),s=y.b().scale(l).ticks(5);m.append("g").attr("id","y-axis").attr("transform","translate(".concat(i,", 0)")).call(s).attr("stroke-width",1.5).attr("font-size","12pt"),m.append("text").attr("id","y-axis-label").attr("transform","translate(18, ".concat(290,") rotate(-90)")).style("text-anchor","middle").text(N[z])}}),[m,h]),Object(a.useEffect)((function(){function t(){return(t=Object(s.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="/computational-seed-mix-design/static/data/scores.csv",console.log(e),t.next=4,y.d(e,(function(t){return{indiv:+t.indiv,cost:+t.cost,phylodist:+t.phylo_dist,bloom:+t.bloom,shannon:+t.shannon,consval:+t.consval,grass_spec_frac:+t.grass_spec_frac,grass_weight_frac:+t.grass_weight_frac}}));case 4:n=t.sent,W({min:Math.floor(y.f(n,(function(t){return+t.cost}))),max:Math.ceil(y.e(n,(function(t){return+t.cost})))}),Y({min:Math.floor(y.f(n,(function(t){return+t.bloom}))),max:Math.ceil(y.e(n,(function(t){return+t.bloom})))}),H({min:Math.floor(y.f(n,(function(t){return+t.shannon}))),max:Math.ceil(y.e(n,(function(t){return+t.shannon})))}),R({min:Math.floor(y.f(n,(function(t){return+t.consval}))),max:Math.ceil(y.e(n,(function(t){return+t.consval})))}),$({min:Math.floor(y.f(n,(function(t){return+t.phylodist}))),max:Math.ceil(y.e(n,(function(t){return+t.phylodist})))}),at({min:Math.floor(y.f(n,(function(t){return+t.cost}))),max:Math.ceil(y.e(n,(function(t){return+t.cost})))}),ot({min:Math.floor(y.f(n,(function(t){return+t.bloom}))),max:Math.ceil(y.e(n,(function(t){return+t.bloom})))}),mt({min:Math.floor(y.f(n,(function(t){return+t.shannon}))),max:Math.ceil(y.e(n,(function(t){return+t.shannon})))}),ht({min:Math.floor(y.f(n,(function(t){return+t.consval}))),max:Math.ceil(y.e(n,(function(t){return+t.consval})))}),gt({min:Math.floor(y.f(n,(function(t){return+t.phylodist}))),max:Math.ceil(y.e(n,(function(t){return+t.phylodist})))}),x(n);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){null!==m&&null!==h&&function(){var a=g,r=Math.floor(.98*y.f(h,(function(t){return+t[M]}))),c=y.e(h,(function(t){return+t[M]})),o=y.h().domain([r,c]).range([i,690-e]),l=y.a().scale(o).ticks(5);m.select("g#x-axis").call(l).attr("stroke-width",1.5).attr("font-size","12pt"),m.select("text#x-axis-label").text(N[M]);var s=Math.floor(.98*y.f(h,(function(t){return+t[z]}))),u=y.e(h,(function(t){return+t[z]})),f=y.h().domain([s,u]).range([580-n,t]),d=y.b().scale(f).ticks(5);function p(t){return t.indiv===a?"red":t.bloom>=ct.min&&t.bloom<=ct.max&&t.cost>=nt.min&&t.cost<=nt.max&&t.shannon>=ut.min&&t.shannon<=ut.max&&t.consval>=pt.min&&t.consval<=pt.max&&t.phylodist>=vt.min&&t.phylodist<=vt.max?"blue":"lightgray"}function x(t){return t.indiv===a?.85:.5}m.select("g#y-axis").call(d).attr("stroke-width",1.5).attr("font-size","12pt"),m.select("text#y-axis-label").text(N[z]);var b=y.j().duration(1e3);m.selectAll("circle").data(h).join((function(t){return t.append("circle").attr("cx",(function(t){return o(+t[M])})).attr("cy",(function(t){return f(+t[z])})).attr("r",3).attr("fill",(function(t){return p(t)})).attr("opacity",(function(t){return x(t)})).on("mouseover",(function(t,e){y.i(this).attr("opacity",.85).attr("r",5)})).on("mouseout",(function(t,e){y.i(this).attr("opacity",(function(t){return x(t)})).attr("r",3)})).on("click",(function(t,e){E(t.indiv),a=t.indiv,y.i("#selected-point").attr("id",null).attr("fill",(function(t){return p(t)})).attr("opacity",(function(t){return x(t)})),y.i(this).attr("fill","red").attr("opacity",.9).attr("id","selected-point")}))}),(function(t){return t.transition(b).attr("cx",(function(t){return o(+t[M])})).attr("cy",(function(t){return f(+t[z])})).attr("fill",(function(t){return p(t)})).attr("opacity",(function(t){return x(t)}))}),(function(t){return t.remove()}))}()}),[m,h,nt,ct,ut,pt,vt,M,z]);return r.a.createElement("div",{id:"optim-browser"},r.a.createElement("div",{id:"ob-slider-pane"},r.a.createElement("h2",null,"Filters"),r.a.createElement(S,{name:"Cost",range:D,update:at}),r.a.createElement(S,{name:"Bloom",range:X,update:ot}),r.a.createElement(S,{name:"Shannon Diversity",range:G,update:mt}),r.a.createElement(S,{name:"Conservatism",range:Q,update:ht}),r.a.createElement(S,{name:"Phylo Dist",range:Z,update:gt})),r.a.createElement("div",{id:"ob-plot-pane"},r.a.createElement("h2",null,"Scatter Plot"),r.a.createElement(O,{xAxis:M,setXAxis:C,yAxis:z,setYAxis:B}),r.a.createElement("div",{id:"plot-pane"})),r.a.createElement(k,{mixid:g,scores:function(){if(null!==h&&null!==g){console.log(g);var t=h.find((function(t){return t.indiv===g}));return{bloom:(t.bloom-X.min)/(X.max-X.min),cost:(t.cost-D.min)/(D.max-D.min),shannon:(t.shannon-G.min)/(G.max-G.min),consval:(t.consval-Q.min)/(Q.max-Q.min),phylodist:(t.phylodist-Z.min)/(Z.max-Z.min)}}}()}))}),O=function(t){var e=t.xAxis,n=t.setXAxis,a=t.yAxis,i=t.setYAxis;return r.a.createElement("div",{id:"axis-control"},r.a.createElement(M,{label:"x-axis",value:e,updater:n}),r.a.createElement(M,{label:"y-axis",value:a,updater:i}))},w=Object(m.a)((function(t){return{formControl:{margin:t.spacing(1),minWidth:200},selectEmpty:{marginTop:t.spacing(2)},table:{minWidth:250},boldCell:{fontWeight:"bolder"}}})),M=function(t){var e=t.label,n=t.value,a=t.updater,i=w();return r.a.createElement(p.a,{className:i.formControl},r.a.createElement(f.a,null,e),r.a.createElement(E.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:n,onChange:function(t){return a(t.target.value)}},r.a.createElement(d.a,{value:"bloom"},"Bloom"),r.a.createElement(d.a,{value:"cost"},"Cost"),r.a.createElement(d.a,{value:"shannon"},"Shannon diversity"),r.a.createElement(d.a,{value:"consval"},"Conservatism"),r.a.createElement(d.a,{value:"phylodist"},"Phylogenetic distance")))},S=function(t){var e=t.name,n=t.range,i=t.update,c=Object(a.useState)(0),o=Object(u.a)(c,2),l=o[0],s=o[1],m=Object(a.useState)(1),f=Object(u.a)(m,2),d=f[0],p=f[1];return Object(a.useEffect)((function(){s(n.min),p(n.max)}),[n]),r.a.createElement("div",{className:"slider"},r.a.createElement("div",{className:"slider-header"},r.a.createElement("div",{className:"slider-objective-name"},e),r.a.createElement("div",{className:"slider-objective-range"},"(",n.min,"-",n.max,")")),r.a.createElement("div",{className:"slider-input-row"},"Min:",r.a.createElement("input",{type:"text",className:"slider-input",value:l,onChange:function(t){s(+t.currentTarget.value),i({min:+t.currentTarget.value,max:d})}}),"Max:",r.a.createElement("input",{type:"text",className:"slider-input",value:d,onChange:function(t){p(+t.currentTarget.value),i({min:l,max:+t.currentTarget.value})}})))},k=function(t){var e=t.mixid,n=t.scores,i=Object(a.useState)([{species:"None",weight:0}]),c=Object(u.a)(i,2),o=c[0],m=c[1],f=function(t,e){return t.species<e.species?-1:e.species<t.species?1:0};return Object(a.useEffect)((function(){function t(){return(t=Object(s.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/computational-seed-mix-design"+"/static/data/mixes/mix".concat(e,".csv"),console.log(n),t.next=4,y.d(n,(function(t){return{id:+t.specindices,species:t.specnames,weight:+t.weights}}));case 4:(a=t.sent).sort(f),m(a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}null!==e&&function(){t.apply(this,arguments)}()}),[e]),r.a.createElement("div",{id:"ob-report-pane"},r.a.createElement("div",{id:"ob-report-table"},r.a.createElement("h2",null,"Mix Composition"),r.a.createElement(C,{scores:n}),r.a.createElement(A,{composition:o})))},C=function(t){var e=t.scores,n=20,i=10,c=5,o=60,l=["Bloom","Cost","Shan Div","Conserv","Phy Dist"],s=y.h().domain([0,1]).range([o,290-i]),m=y.g().domain(l.map((function(t){return t}))).range([n,150-c]),f=Object(a.useState)(null),d=Object(u.a)(f,2),p=d[0],h=d[1];return Object(a.useEffect)((function(){var t=y.i("#mix-score-plot").append("svg").attr("width",290).attr("height",150),e=y.c().scale(s).ticks(6);t.append("g").attr("id","score-plot-xaxis").attr("transform","translate(0, ".concat(n,")")).call(e).attr("stroke-width",1).attr("font-size","9pt").call((function(t){return t.select(".domain").remove()}));var a=y.b().scale(m).ticks(0);t.append("g").attr("id","score-plot-yaxis").attr("transform","translate(".concat(o,", 0)")).call(a).attr("stroke-width",1).attr("font-size","9pt").call((function(t){return t.select(".domain").remove()})).call((function(t){return t.selectAll("line").remove()})),h(t)}),[]),Object(a.useEffect)((function(){if(null!==p){var t=[e.bloom,e.cost,e.shannon,e.consval,e.phylodist],n=y.j().duration(500);p.selectAll("line.plot-element").data(t).join((function(t){return t.append("line").attr("class","plot-element").style("stroke","black").attr("x1",s(0)).attr("x2",(function(t){return s(t)})).attr("y1",(function(t,e){return m(l[e])+m.bandwidth()/2})).attr("y2",(function(t,e){return m(l[e])+m.bandwidth()/2}))}),(function(t){return t.transition(n).attr("x2",(function(t){return s(t)}))}),(function(t){return t.remove()})),p.selectAll("circle").data(t).join((function(t){return t.append("circle").attr("cx",(function(t){return s(t)})).attr("cy",(function(t,e){return m(l[e])+m.bandwidth()/2})).attr("r",4).style("fill","orange").style("stroke","black")}),(function(t){return t.transition(n).attr("cx",(function(t){return s(t)}))}),(function(t){return t.remove()}))}}),[e]),r.a.createElement("div",{id:"mix-score-panel"},r.a.createElement("div",{id:"mix-score-plot"}))},A=function(t){var e=t.composition,n=w();return r.a.createElement("div",{id:"mix-composition-table"},r.a.createElement(h.a,{className:n.table,size:"small","aria-label":"a dense table"},r.a.createElement(v.a,null,r.a.createElement(g.a,null,r.a.createElement(b.a,{className:n.boldCell,style:{padding:"6px"}},"Species"),r.a.createElement(b.a,{className:n.boldCell,align:"right",style:{padding:"6px"}},"Weight\xa0(oz)"))),r.a.createElement(x.a,null,e.map((function(t){return r.a.createElement(g.a,{key:t.id},r.a.createElement(b.a,{component:"th",scope:"row",style:{padding:"3px"}},t.species.replace("_"," ")),r.a.createElement(b.a,{align:"right",style:{padding:"3px"}},Math.round(16*t.weight)))})))))},N={bloom:"Bloom",cost:"Cost",shannon:"Shannon diversity",consval:"Conservatism",phylodist:"Phylogenetic distance"},_=function(){return r.a.createElement("div",{id:"app-container"},r.a.createElement(j,null))};c.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.e81ff34c.chunk.js.map